!function(r){"use strict";r.module("jiraErrorLogs.provider",[]),r.module("jiraErrorLogs.http",[]),r.module("jiraErrorLogs.config",[]),r.module("jiraErrorLogs.service",[]),r.module("jiraErrorLogs.directive",[]),r.module("jiraErrorLogs",["jiraErrorLogs.provider","jiraErrorLogs.http","jiraErrorLogs.service","jiraErrorLogs.config","jiraErrorLogs.directive"])}(angular),function(r){"use strict";function e(r){r.interceptors.push("jiraLogHttpInterceptor")}r.module("jiraErrorLogs.config").config(e)}(angular),function(r){"use strict";function e(){var r={restrict:"EA",template:'<pre style="display: none;" id="contexteDifyz">{{vm.refreshContextView()}}</pre>',scope:{userInfo:"@"},controller:n,controllerAs:"vm",bindToController:!0};return r}function n(r,e){function n(){var e=r.getUserHistoryLog(),n=r.getTechHistoryLog(),i="Version API SP: "+(t?t:"")+"\n\n";return o.userInfo&&o.userInfo.login?(i+="Utilisateur actuellement identifié :\n\n",i+="* login: "+o.userInfo.login+"\n"):i+="Utilisateur actuellement non identifié.\n",e&&e.length>0&&(i+="\nDerniers événements fonctionnels:\n\n",e.forEach(function(r){i+="* "+r.date+" - "+r.msg+"\n"})),n&&n.length>0&&(i+="\nDerniers événements techniques:\n\n",n.forEach(function(r){i+="* "+r.date+" - "+r.msg+"\n"})),i}var t,o=this;o.refreshContextView=n,e.appVersion().then(function(r){t=r})}r.module("jiraErrorLogs.directive").directive("userContext",e),n.$inject=["logData","jiraErrorLogsSettings"]}(angular),function(r){"use strict";function e(){var r="",e="",n=[];this.setUrlAppVersion=function(r){e=r},this.setApiName=function(r){n=r},this.$get=["$http",function(t){function o(e){return e&&e.data?r=e.data.build.version:void 0}return{apiName:n,appVersion:function(){return e?t.get(e).then(o):void 0}}}]}r.module("jiraErrorLogs.provider").provider("jiraErrorLogsSettings",e)}(angular),function(r){"use strict";function e(){function r(r){o.push({date:new Date,msg:r}),o.length>5&&o.shift()}function e(){return o}function n(r){var e=new Date,n=e.toLocaleString()+"."+e.getMilliseconds();i.push({date:n,msg:r}),i.length>10&&i.shift()}function t(){return i}var o=[],i=[],a={addUserHistoryLog:r,getUserHistoryLog:e,addTechHistoryLog:n,getTechHistoryLog:t};return a}r.module("jiraErrorLogs.service").factory("logData",e)}(angular),function(r){"use strict";function e(r,e,n){var t={request:function(r){return n.invoke(function(n){for(var t=[],o=0;o<n.apiName.length;o++)r&&r.url&&0===r.url.indexOf(n.apiName[o])&&r.url.indexOf("/info")<=0&&t.push(r.url);t.length&&e.addTechHistoryLog("appel API : "+r.method+" "+r.url)}),r},requestError:function(t){return n.invoke(function(r){for(var n=[],o=0;o<r.apiName.length;o++)t&&t.url&&0===t.url.indexOf(r.apiName[o])&&t.url.indexOf("/info")<=0&&n.push(t.url);if(n.length){var i="{color:red}appel API : "+t.method+" "+t.url;t.data&&t.data.message&&(i+=', message "'+t.data.message+'"'),i+="{color}",e.addTechHistoryLog(i)}}),r.reject(t)},response:function(r){return n.invoke(function(n){for(var t=[],o=0;o<n.apiName.length;o++)r&&r.url&&0===r.url.indexOf(n.apiName[o])&&r.url.indexOf("/info")<=0&&t.push(r.url);t.length&&e.addTechHistoryLog("réponse API : "+r.config.method+" "+r.config.url+", code "+r.status)}),r},responseError:function(t){return n.invoke(function(r){for(var n=[],o=0;o<r.apiName.length;o++)t&&t.url&&0===t.url.indexOf(r.apiName[o])&&t.url.indexOf("/info")<=0&&n.push(t.url);if(n.length){var i="{color:red}réponse API : "+t.rejection.method+" "+t.rejection.url+", code "+t.status;t.data&&t.data.message&&(i+=', message "'+t.data.message+'"'),i+="{color}",e.addTechHistoryLog(i)}}),r.reject(t)}};return t}r.module("jiraErrorLogs.http").factory("jiraLogHttpInterceptor",e),e.$inject=["$q","logData","$injector"]}(angular);