!function(r){"use strict";r.module("jiraErrorLogs.provider",[]),r.module("jiraErrorLogs.http",[]),r.module("jiraErrorLogs.config",[]),r.module("jiraErrorLogs.service",[]),r.module("jiraErrorLogs.directive",[]),r.module("jiraErrorLogs",["jiraErrorLogs.provider","jiraErrorLogs.http","jiraErrorLogs.service","jiraErrorLogs.config","jiraErrorLogs.directive"])}(angular),function(r){"use strict";function e(r){r.interceptors.push("jiraLogHttpInterceptor")}r.module("jiraErrorLogs.config").config(e)}(angular),function(r){"use strict";function e(){var r={restrict:"EA",template:'<pre style="display: none;" id="contexteDifyz">{{vm.refreshContextView()}}</pre>',scope:{userInfo:"="},controller:n,controllerAs:"vm",bindToController:!0};return r}function n(r,e){function n(){var e=r.getUserHistoryLog(),n=r.getTechHistoryLog(),i="Version API SP: "+(o?o:"")+"\n\n";return t.userInfo&&t.userInfo.isLogged?(i+="Utilisateur actuellement identifié :\n\n",i+="* login: "+t.userInfo.login+"\n"):i+="Utilisateur actuellement non identifié.\n",e&&e.length>0&&(i+="\nDerniers événements fonctionnels:\n\n",e.forEach(function(r){i+="* "+r.date+" - "+r.msg+"\n"})),n&&n.length>0&&(i+="\nDerniers événements techniques:\n\n",n.forEach(function(r){i+="* "+r.date+" - "+r.msg+"\n"})),i}var o,t=this;t.refreshContextView=n,e.appVersion().then(function(r){o=r})}r.module("jiraErrorLogs.directive").directive("userContext",e),n.$inject=["logData","jiraErrorLogsSettings"]}(angular),function(r){"use strict";function e(){var r="",e="",n=[];this.setUrlAppVersion=function(r){e=r},this.setApiName=function(r){n=r},this.$get=["$http",function(o){function t(e){return e&&e.data?r=e.data.build.version:void 0}return{apiName:n,appVersion:function(){return e?o.get(e).then(t):void 0}}}]}r.module("jiraErrorLogs.provider").provider("jiraErrorLogsSettings",e)}(angular),function(r){"use strict";function e(){function r(r){t.push({date:new Date,msg:r}),t.length>5&&t.shift()}function e(){return t}function n(r){var e=new Date,n=e.toLocaleString()+"."+e.getMilliseconds();i.push({date:n,msg:r}),i.length>10&&i.shift()}function o(){return i}var t=[],i=[],a={addUserHistoryLog:r,getUserHistoryLog:e,addTechHistoryLog:n,getTechHistoryLog:o};return a}r.module("jiraErrorLogs.service").factory("logData",e)}(angular),function(r){"use strict";function e(r,e,n){var o={request:function(r){return n.invoke(function(n){for(var o=[],t=0;t<n.apiName.length;t++)r&&r.url&&0===r.url.indexOf(n.apiName[t])&&r.url.indexOf("/info")<=0&&o.push(r.url);o.length&&e.addTechHistoryLog("appel API : "+r.method+" "+r.url)}),r},requestError:function(o){return n.invoke(function(r){for(var n=[],t=0;t<r.apiName.length;t++)o&&o.url&&0===o.url.indexOf(r.apiName[t])&&o.url.indexOf("/info")<=0&&n.push(o.url);if(n.length){var i="{color:red}appel API : "+o.method+" "+o.url;o.data&&o.data.message&&(i+=', message "'+o.data.message+'"'),i+="{color}",e.addTechHistoryLog(i)}}),r.reject(o)},response:function(r){return n.invoke(function(n){for(var o=[],t=0;t<n.apiName.length;t++)r.config&&r.config.url&&0===r.config.url.indexOf(n.apiName[t])&&r.config.url.indexOf("/info")<=0&&o.push(r.config.url);o.length&&e.addTechHistoryLog("réponse API : "+r.config.method+" "+r.config.url+", code "+r.status)}),r},responseError:function(o){return n.invoke(function(r){for(var n=[],t=0;t<r.apiName.length;t++)o.config&&o.config.url&&0===o.config.url.indexOf(r.apiName[t])&&o.config.url.indexOf("/info")<=0&&n.push(o.config.url);if(n.length){var i="{color:red}réponse API : "+o.config.method+" "+o.config.url+", code "+o.status;o.data&&o.data.message&&(i+=', message "'+o.data.message+'"'),i+="{color}",e.addTechHistoryLog(i)}}),r.reject(o)}};return o}r.module("jiraErrorLogs.http").factory("jiraLogHttpInterceptor",e),e.$inject=["$q","logData","$injector"]}(angular);