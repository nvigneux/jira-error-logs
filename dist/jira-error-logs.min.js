!function(r){"use strict";r.module("jiraErrorLogs.provider",[]),r.module("jiraErrorLogs.http",[]),r.module("jiraErrorLogs.config",[]),r.module("jiraErrorLogs.service",[]),r.module("jiraErrorLogs.directive",[]),r.module("jiraErrorLogs",["jiraErrorLogs.provider","jiraErrorLogs.http","jiraErrorLogs.service","jiraErrorLogs.config","jiraErrorLogs.directive"])}(angular),function(r){"use strict";function o(r){r.interceptors.push("jiraLogHttpInterceptor")}r.module("jiraErrorLogs.config").config(o)}(angular),function(r){"use strict";function o(){var r={restrict:"EA",template:'<pre style="display: none;" id="contexteDifyz">{{vm.refreshContextView()}}</pre>',scope:{userInfo:"@"},controller:e,controllerAs:"vm",bindToController:!0};return r}function e(r,o){function e(){var e=r.getUserHistoryLog(),i=r.getTechHistoryLog(),t="Version API SP: "+o.appVersion+"\n\n";return n.userInfo&&n.userInfo.login?(t+="Utilisateur actuellement identifié :\n\n",t+="* login: "+n.userInfo.login+"\n"):t+="Utilisateur actuellement non identifié.\n",e&&e.length>0&&(t+="\nDerniers événements fonctionnels:\n\n",e.forEach(function(r){t+="* "+r.date+" - "+r.msg+"\n"})),i&&i.length>0&&(t+="\nDerniers événements techniques:\n\n",i.forEach(function(r){t+="* "+r.date+" - "+r.msg+"\n"})),t}var n=this;n.refreshContextView=e}r.module("jiraErrorLogs.directive").directive("userContext",o),e.$inject=["logData","jiraErrorLogsSettings"]}(angular),function(r){"use strict";function o(){var r="",o=[];this.setAppVersion=function(o){r=o},this.setApiName=function(r){o=r},this.$get=function(){return{appVersion:r,apiName:o}}}r.module("jiraErrorLogs.provider").provider("jiraErrorLogsSettings",o)}(angular),function(r){"use strict";function o(){function r(r){i.push({date:new Date,msg:r}),i.length>5&&i.shift()}function o(){return i}function e(r){var o=new Date,e=o.toLocaleString()+"."+o.getMilliseconds();t.push({date:e,msg:r}),t.length>10&&t.shift()}function n(){return t}var i=[],t=[],s={addUserHistoryLog:r,getUserHistoryLog:o,addTechHistoryLog:e,getTechHistoryLog:n};return s}r.module("jiraErrorLogs.service").factory("logData",o)}(angular),function(r){"use strict";function o(r,o){var e={request:function(r){return console.log("config",r),r&&r.url&&(0===r.url.indexOf(ApiConfig.API_EDITOR)||0===r.url.indexOf(ApiConfig.API_SP))&&0!==r.url.indexOf(ApiConfig.API_SP+"/info")&&o.addTechHistoryLog("appel API : "+r.method+" "+r.url),r},requestError:function(e){if(console.log("rejection",e),e&&e.url&&(0===e.url.indexOf(ApiConfig.API_EDITOR)||0===e.url.indexOf(ApiConfig.API_SP))&&0!==e.url.indexOf(ApiConfig.API_SP+"/info")){var n="{color:red}appel API : "+e.method+" "+e.url;e.data&&e.data.message&&(n+=', message "'+e.data.message+'"'),n+="{color}",o.addTechHistoryLog(n)}return r.reject(e)},response:function(r){return console.log("response",r),r.config&&r.config.url&&(0===r.config.url.indexOf(ApiConfig.API_EDITOR)||0===r.config.url.indexOf(ApiConfig.API_SP))&&0!==r.config.url.indexOf(ApiConfig.API_SP+"/info")&&o.addTechHistoryLog("réponse API : "+r.config.method+" "+r.config.url+", code "+r.status),r},responseError:function(e){if(console.log("rejection",e),e.config&&e.config.url&&(0===e.config.url.indexOf(ApiConfig.API_EDITOR)||0===e.config.url.indexOf(ApiConfig.API_SP))&&0!==e.config.url.indexOf(ApiConfig.API_SP+"/info")){var n="{color:red}réponse API : "+e.config.method+" "+e.config.url+", code "+e.status;e.data&&e.data.message&&(n+=', message "'+e.data.message+'"'),n+="{color}",o.addTechHistoryLog(n)}return r.reject(e)}};return e}r.module("jiraErrorLogs.http").factory("jiraLogHttpInterceptor",o),o.$inject=["$q","logData"]}(angular);