!function(e){"use strict";e.module("jiraCaptureLogs.provider",[]),e.module("jiraCaptureLogs.http",[]),e.module("jiraCaptureLogs.config",[]),e.module("jiraCaptureLogs.service",[]),e.module("jiraCaptureLogs.directive",[]),e.module("jiraCaptureLogs",["jiraCaptureLogs.provider","jiraCaptureLogs.http","jiraCaptureLogs.service","jiraCaptureLogs.config","jiraCaptureLogs.directive"])}(angular),function(e){"use strict";function r(e){e.interceptors.push("jiraCaptureLogsHttpInterceptor")}e.module("jiraCaptureLogs.config").config(r)}(angular),function(e){"use strict";function r(){var e={restrict:"EA",template:'<pre style="display: none;" id="{{vm.jiraCaptureId}}">{{vm.refreshContextView()}}</pre>',scope:{userIsLogged:"=",userLogin:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,r){function t(){return console.error("Jira Capture Logs - ID is not defined"),"jiraCaptureId"}function n(){r.appVersion().then(function(e){o=e})}function i(){var r=e.getUserHistoryLog(),t=e.getTechHistoryLog(),n=(o?"Version API SP: "+o:"")+"\n\n";if(a.userIsLogged){var i=a.userLogin?a.userLogin:"Login non renseigné";n+="Utilisateur actuellement identifié :\n\n",n+="* login: "+i+"\n"}else n+="Utilisateur actuellement non identifié.\n";return r&&r.length>0&&(n+="\nDerniers événements fonctionnels:\n\n",r.forEach(function(e){n+="* "+e.date+" - "+e.msg+"\n"})),t&&t.length>0&&(n+="\nDerniers événements techniques:\n\n",t.forEach(function(e){n+="* "+e.date+" - "+e.msg+"\n"})),n}var o,a=this;a.refreshContextView=i,a.jiraCaptureId=r.jiraCaptureId?r.jiraCaptureId:t(),r.urlAppVersion?n():console.error("Jira Capture Logs - API Version is not defined")}e.module("jiraCaptureLogs.directive").directive("jiraCaptureLogs",r),t.$inject=["jiraCaptureLogs","jiraCaptureLogsSettings"]}(angular),function(e){"use strict";function r(e,r,t){var n={request:function(e){return t.invoke(function(t){if(t.apiName&&t.apiName.length){for(var n=[],i=0;i<t.apiName.length;i++)e&&e.url&&0===e.url.indexOf(t.apiName[i])&&e.url.indexOf("/info")<=0&&n.push(e.url);if(n.length){var o="appel API : "+e.method+" "+e.url;r.addTechHistoryLog(o)}}else console.error("Jira Capture Logs - API Name is not defined")}),e},requestError:function(n){return t.invoke(function(e){for(var t=[],i=0;i<e.apiName.length;i++)n&&n.url&&0===n.url.indexOf(e.apiName[i])&&n.url.indexOf("/info")<=0&&t.push(n.url);if(t.length){var o="{color:red}appel API : "+n.method+" "+n.url;n.data&&n.data.message&&(o+=', message "'+n.data.message+'"'),o+="{color}",r.addTechHistoryLog(o)}}),e.reject(n)},response:function(e){return t.invoke(function(t){for(var n=[],i=0;i<t.apiName.length;i++)e.config&&e.config.url&&0===e.config.url.indexOf(t.apiName[i])&&e.config.url.indexOf("/info")<=0&&n.push(e.config.url);if(n.length){var o="réponse API : "+e.config.method+" "+e.config.url+", code "+e.status;r.addTechHistoryLog(o)}}),e},responseError:function(n){return t.invoke(function(e){for(var t=[],i=0;i<e.apiName.length;i++)n.config&&n.config.url&&0===n.config.url.indexOf(e.apiName[i])&&n.config.url.indexOf("/info")<=0&&t.push(n.config.url);if(t.length){var o="{color:red}réponse API : "+n.config.method+" "+n.config.url+", code "+n.status;n.data&&n.data.message&&(o+=', message "'+n.data.message+'"'),o+="{color}",r.addTechHistoryLog(o)}}),e.reject(n)}};return n}e.module("jiraCaptureLogs.http").factory("jiraCaptureLogsHttpInterceptor",r),r.$inject=["$q","jiraCaptureLogs","$injector"]}(angular),function(e){"use strict";function r(){var e,r,t="",n="",i="",o=!1,a=[];this.setUrlAppVersion=function(e,r){i=e,o=r},this.setApiName=function(e){a=e},this.setId=function(e){n=e},this.setTechLogsLength=function(r){e=r},this.setUserLogsLength=function(e){r=e},this.$get=["$http","$q",function(s,u){function g(e){return e&&e.data?t=e.data.build.version:void 0}function c(e){if(e)return s.get(i).then(g);var r=u.defer();return r.resolve(i),r.promise}return{appVersion:function(){return i?c(o):void 0},urlAppVersion:i,apiName:a,jiraCaptureId:n,techLogsLength:e,userLogsLength:r}}]}e.module("jiraCaptureLogs.provider").provider("jiraCaptureLogsSettings",r)}(angular),function(e){"use strict";function r(e){function r(r){var t=5;e.invoke(function(e){t=e.userLogsLength?e.userLogsLength:t}),o.push({date:new Date,msg:r}),o.length>t&&o.shift()}function t(){return o}function n(r){var t=new Date,n=t.toLocaleString()+"."+t.getMilliseconds(),i=10;e.invoke(function(e){i=e.techLogsLength?e.techLogsLength:i}),a.push({date:n,msg:r}),a.length>i&&a.shift()}function i(){return a}var o=[],a=[],s={addUserHistoryLog:r,getUserHistoryLog:t,addTechHistoryLog:n,getTechHistoryLog:i};return s}e.module("jiraCaptureLogs.service").factory("jiraCaptureLogs",r),r.$inject=["$injector"]}(angular);