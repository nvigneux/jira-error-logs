!function(e){"use strict";e.module("jiraCaptureLogs.provider",[]),e.module("jiraCaptureLogs.http",[]),e.module("jiraCaptureLogs.config",[]),e.module("jiraCaptureLogs.service",[]),e.module("jiraCaptureLogs.directive",[]),e.module("jiraCaptureLogs",["jiraCaptureLogs.provider","jiraCaptureLogs.http","jiraCaptureLogs.service","jiraCaptureLogs.config","jiraCaptureLogs.directive"])}(angular),function(e){"use strict";function r(e){e.interceptors.push("jiraCaptureLogsHttpInterceptor")}e.module("jiraCaptureLogs.config").config(r)}(angular),function(e){"use strict";function r(){var e={restrict:"EA",template:'<pre style="display: none;" id="{{vm.jiraCaptureId}}">{{vm.refreshContextView()}}</pre>',scope:{userInfo:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,r){function t(){var r=e.getUserHistoryLog(),t=e.getTechHistoryLog(),o="Version API SP: "+(n?n:"")+"\n\n";return i.userInfo&&i.userInfo.isLogged?(o+="Utilisateur actuellement identifié :\n\n",o+="* login: "+i.userInfo.login+"\n"):o+="Utilisateur actuellement non identifié.\n",r&&r.length>0&&(o+="\nDerniers événements fonctionnels:\n\n",r.forEach(function(e){o+="* "+e.date+" - "+e.msg+"\n"})),t&&t.length>0&&(o+="\nDerniers événements techniques:\n\n",t.forEach(function(e){o+="* "+e.date+" - "+e.msg+"\n"})),o}var n,i=this;i.refreshContextView=t,i.jiraCaptureId=r.jiraCaptureId,r.appVersion().then(function(e){n=e})}e.module("jiraCaptureLogs.directive").directive("jiraCaptureLogs",r),t.$inject=["jiraCaptureLogs","jiraCaptureLogsSettings"]}(angular),function(e){"use strict";function r(e,r,t){var n={request:function(e){return t.invoke(function(t){for(var n=[],i=0;i<t.apiName.length;i++)e&&e.url&&0===e.url.indexOf(t.apiName[i])&&e.url.indexOf("/info")<=0&&n.push(e.url);if(n.length){var o="appel API : "+e.method+" "+e.url;r.addTechHistoryLog(o)}}),e},requestError:function(n){return t.invoke(function(e){for(var t=[],i=0;i<e.apiName.length;i++)n&&n.url&&0===n.url.indexOf(e.apiName[i])&&n.url.indexOf("/info")<=0&&t.push(n.url);if(t.length){var o="{color:red}appel API : "+n.method+" "+n.url;n.data&&n.data.message&&(o+=', message "'+n.data.message+'"'),o+="{color}",r.addTechHistoryLog(o)}}),e.reject(n)},response:function(e){return t.invoke(function(t){for(var n=[],i=0;i<t.apiName.length;i++)e.config&&e.config.url&&0===e.config.url.indexOf(t.apiName[i])&&e.config.url.indexOf("/info")<=0&&n.push(e.config.url);if(n.length){var o="réponse API : "+e.config.method+" "+e.config.url+", code "+e.status;r.addTechHistoryLog(o)}}),e},responseError:function(n){return t.invoke(function(e){for(var t=[],i=0;i<e.apiName.length;i++)n.config&&n.config.url&&0===n.config.url.indexOf(e.apiName[i])&&n.config.url.indexOf("/info")<=0&&t.push(n.config.url);if(t.length){var o="{color:red}réponse API : "+n.config.method+" "+n.config.url+", code "+n.status;n.data&&n.data.message&&(o+=', message "'+n.data.message+'"'),o+="{color}",r.addTechHistoryLog(o)}}),e.reject(n)}};return n}e.module("jiraCaptureLogs.http").factory("jiraCaptureLogsHttpInterceptor",r),r.$inject=["$q","jiraCaptureLogs","$injector"]}(angular),function(e){"use strict";function r(){var e="",r="",t="",n=[];this.setUrlAppVersion=function(e){t=e},this.setApiName=function(e){n=e},this.setId=function(e){r=e},this.$get=["$http",function(i){function o(r){return r&&r.data?e=r.data.build.version:void 0}return{appVersion:function(){return t?i.get(t).then(o):void 0},apiName:n,jiraCaptureId:r}}]}e.module("jiraCaptureLogs.provider").provider("jiraCaptureLogsSettings",r)}(angular),function(e){"use strict";function r(){function e(e){i.push({date:new Date,msg:e}),i.length>5&&i.shift()}function r(){return i}function t(e){var r=new Date,t=r.toLocaleString()+"."+r.getMilliseconds();o.push({date:t,msg:e}),o.length>10&&o.shift()}function n(){return o}var i=[],o=[],a={addUserHistoryLog:e,getUserHistoryLog:r,addTechHistoryLog:t,getTechHistoryLog:n};return a}e.module("jiraCaptureLogs.service").factory("jiraCaptureLogs",r)}(angular);